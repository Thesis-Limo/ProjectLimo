 <root BTCPP_format="4" >
    <BehaviorTree ID="MainTree">
        <Sequence name="root">
            <SubTree ID="BatteryCheckTree"/>
            <SubTree ID="RobotMove"/>
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="BatteryCheckTree">
        <Fallback>
            <Condition ID="BatteryCheck"/>
            <Action ID="EmergencyBrake"/>
        </Fallback>
    </BehaviorTree>
    
    <BehaviorTree ID="RobotMove">
        <Parallel name="Movement" success_threshold="2">
            <SubTree ID="TrackingObject"/>
            <SubTree ID="MovementRobot"/>
        </Parallel>
    </BehaviorTree>
    
    <BehaviorTree ID="TrackingObject">
        <Sequence>
            <Action ID="TrackObject"/>
            <Condition ID="ObjectFound"/>
            <Action ID="CreatePath"/>
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="MovementRobot">
        <Fallback>
            <SubTree ID="Emergency"/>
            <SubTree ID="TargetCheck"/>
            <SubTree ID="Moving"/>
        </Fallback>
    </BehaviorTree>
    
    <BehaviorTree ID="Emergency">
        <Sequence>
            <Condition ID="MinDistance"/>
            <Fallback name="DistanceBased">
                <Sequence>
                    <Condition ID="SpeedNotZero"/>
                    <Action ID="EmergencyBrake"/>
                </Sequence>
                <Sequence>
                    <Condition ID="SpeedZero"/>
                    <Action ID="MoveBack"/>
                </Sequence>
            </Fallback>
        </Sequence>
    </BehaviorTree>
    
    <BehaviorTree ID="TargetCheck">
        <Sequence name="TargetCheck">
            <Condition ID="CheckPath"/>
            <Sequence>
                <Condition ID="TargetNotFound"/>
                <Action ID="RotateAround"/>
            </Sequence>
        </Sequence>
    </BehaviorTree>
    
    <BehaviorTree ID="Moving">
        <Fallback name="Moving">
            <Sequence>
                <Condition ID="ToCloseToTarget"/>
                <Action ID="MoveBack"/>
            </Sequence>
            <Sequence>
                <Condition ID="CloseEnoughToTarget"/>
                <Action ID="MoveToTarget"/>
            </Sequence>
        </Fallback>
    </BehaviorTree>
 </root>